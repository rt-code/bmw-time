!function(Q){void 0===Q.fn.inputmask&&(Q.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},escapeChar:"\\",mask:null,oncomplete:Q.noop,onincomplete:Q.noop,oncleared:Q.noop,repeat:0,greedy:!0,autoUnmask:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},onKeyUp:Q.noop,onKeyDown:Q.noop,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:Q.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,isNumeric:!1,radixPoint:"",skipRadixDance:!1,rightAlignNumerics:!0,definitions:{9:{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-zА-яЁё]",cardinality:1},"*":{validator:"[A-Za-zА-яЁё0-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],getMaskLength:function(e,t,i,a,n){var s=e.length;return t||("*"==i?s=a.length+1:1<i&&(s+=e.length*(i-1))),s}},escapeRegex:function(e){return e.replace(new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","gim"),"\\$1")}},Q.fn.inputmask=function(e,a){var n,B=Q.extend(!0,{},Q.inputmask.defaults,a),t=null!==navigator.userAgent.match(new RegExp("msie 10","i")),H=null!==navigator.userAgent.match(new RegExp("iphone","i")),s=null!==navigator.userAgent.match(new RegExp("android.*safari.*","i")),U=null!==navigator.userAgent.match(new RegExp("android.*chrome.*","i")),F=u("paste")&&!t?"paste":u("input")?"input":"propertychange",r=0;if("string"==typeof e)switch(e){case"mask":return l(B.alias,a),0==(n=c()).length?this:this.each(function(){f(Q.extend(!0,{},n),0).mask(this)});case"unmaskedvalue":var o=Q(this);return o.data("_inputmask")?(n=o.data("_inputmask").masksets,r=o.data("_inputmask").activeMasksetIndex,B=o.data("_inputmask").opts,f(n,r).unmaskedvalue(o)):o.val();case"remove":return this.each(function(){var e=Q(this),t=this;if(e.data("_inputmask")){var i;n=e.data("_inputmask").masksets,r=e.data("_inputmask").activeMasksetIndex,B=e.data("_inputmask").opts,t._valueSet(f(n,r).unmaskedvalue(e,!0)),e.removeData("_inputmask"),e.unbind(".inputmask"),e.removeClass("focus.inputmask"),Object.getOwnPropertyDescriptor&&(i=Object.getOwnPropertyDescriptor(t,"value")),i&&i.get?t._valueGet&&Object.defineProperty(t,"value",{get:t._valueGet,set:t._valueSet}):document.__lookupGetter__&&t.__lookupGetter__("value")&&t._valueGet&&(t.__defineGetter__("value",t._valueGet),t.__defineSetter__("value",t._valueSet));try{delete t._valueGet,delete t._valueSet}catch(e){t._valueGet=void 0,t._valueSet=void 0}}});case"getemptymask":return this.data("_inputmask")?(n=this.data("_inputmask").masksets,r=this.data("_inputmask").activeMasksetIndex,n[r]._buffer.join("")):"";case"hasMaskedValue":return!!this.data("_inputmask")&&!this.data("_inputmask").opts.autoUnmask;case"isComplete":return n=this.data("_inputmask").masksets,r=this.data("_inputmask").activeMasksetIndex,B=this.data("_inputmask").opts,f(n,r).isComplete(this[0]._valueGet().split(""));case"getmetadata":return this.data("_inputmask")?(n=this.data("_inputmask").masksets,r=this.data("_inputmask").activeMasksetIndex,n[r].metadata):void 0;default:return l(e,a)||(B.mask=e),0==(n=c()).length?this:this.each(function(){f(Q.extend(!0,{},n),r).mask(this)})}else{if("object"==typeof e)return l((B=Q.extend(!0,{},Q.inputmask.defaults,e)).alias,e),0==(n=c()).length?this:this.each(function(){f(Q.extend(!0,{},n),r).mask(this)});if(null==e)return this.each(function(){var e=Q(this).attr("data-inputmask");if(e&&""!=e)try{e=e.replace(new RegExp("'","g"),'"');var t=Q.parseJSON("{"+e+"}");Q.extend(!0,t,a),l((B=Q.extend(!0,{},Q.inputmask.defaults,t)).alias,t),B.alias=void 0,Q(this).inputmask(B)}catch(e){}})}function u(e){var t=document.createElement("input"),i=(e="on"+e)in t;return i||(t.setAttribute(e,"return;"),i="function"==typeof t[e]),t=null,i}function l(e,t){var i=B.aliases[e];return!!i&&(i.alias&&l(i.alias),Q.extend(!0,B,i),Q.extend(!0,B,t),!0)}function h(e){B.numericInput&&(e=e.split("").reverse().join(""));var s=!1,r=0,t=B.greedy,i=B.repeat;"*"==i&&(t=!1),1==e.length&&0==t&&0!=i&&(B.placeholder="");for(var a=Q.map(e.split(""),function(e,t){var i=[];if(e==B.escapeChar)s=!0;else if(e!=B.optionalmarker.start&&e!=B.optionalmarker.end||s){var a=B.definitions[e];if(a&&!s)for(var n=0;n<a.cardinality;n++)i.push(W(r+n));else i.push(e),s=!1;return r+=i.length,i}}),n=a.slice(),o=1;o<i&&t;o++)n=n.concat(a.slice());return{mask:n,repeat:i,greedy:t}}function v(e){B.numericInput&&(e=e.split("").reverse().join(""));var c=!1,f=!1,d=!1;return Q.map(e.split(""),function(e,t){var i=[];if(e==B.escapeChar)f=!0;else if(e!=B.optionalmarker.start||f){if(e!=B.optionalmarker.end||f){var a=B.definitions[e];if(a&&!f){for(var n=a.prevalidator,s=n?n.length:0,r=1;r<a.cardinality;r++){var o=r<=s?n[r-1]:[],u=o.validator,l=o.cardinality;i.push({fn:u?"string"==typeof u?new RegExp(u):new function(){this.test=u}:new RegExp("."),cardinality:l||1,optionality:c,newBlockMarker:1==c&&d,offset:0,casing:a.casing,def:a.definitionSymbol||e}),1==c&&(d=!1)}i.push({fn:a.validator?"string"==typeof a.validator?new RegExp(a.validator):new function(){this.test=a.validator}:new RegExp("."),cardinality:a.cardinality,optionality:c,newBlockMarker:d,offset:0,casing:a.casing,def:a.definitionSymbol||e})}else i.push({fn:null,cardinality:0,optionality:c,newBlockMarker:d,offset:0,casing:null,def:e}),f=!1;return d=!1,i}d=!(c=!1)}else d=c=!0})}function c(){var u=[],l=[],c=[];function f(e){return B.optionalmarker.start+e+B.optionalmarker.end}function d(e){var t=e.length;for(i=0;i<t&&e.charAt(i)!=B.optionalmarker.start;i++);var a=[e.substring(0,i)];return i<t&&a.push(e.substring(i+1,t)),a}function p(e,t,a){var n,s,r=function(e){var t=0,a=0,n=e.length;for(i=0;i<n&&(e.charAt(i)==B.optionalmarker.start&&t++,e.charAt(i)==B.optionalmarker.end&&a++,!(0<t&&t==a));i++);var s=[e.substring(0,i)];return i<n&&s.push(e.substring(i+1,n)),s}(t),o=d(r[0]);1<o.length?(n=e+o[0]+f(o[1])+(1<r.length?r[1]:""),-1==Q.inArray(n,l)&&""!=n&&(l.push(n),s=h(n),u.push({mask:n,_buffer:s.mask,buffer:s.mask.slice(),tests:v(n),lastValidPosition:-1,greedy:s.greedy,repeat:s.repeat,metadata:a})),n=e+o[0]+(1<r.length?r[1]:""),-1==Q.inArray(n,l)&&""!=n&&(l.push(n),s=h(n),u.push({mask:n,_buffer:s.mask,buffer:s.mask.slice(),tests:v(n),lastValidPosition:-1,greedy:s.greedy,repeat:s.repeat,metadata:a})),1<d(o[1]).length&&p(e+o[0],o[1]+r[1],a),1<r.length&&1<d(r[1]).length&&(p(e+o[0]+f(o[1]),r[1],a),p(e+o[0],r[1],a))):(n=e+r,-1==Q.inArray(n,l)&&""!=n&&(l.push(n),s=h(n),u.push({mask:n,_buffer:s.mask,buffer:s.mask.slice(),tests:v(n),lastValidPosition:-1,greedy:s.greedy,repeat:s.repeat,metadata:a})))}return Q.isFunction(B.mask)&&(B.mask=B.mask.call(this,B)),Q.isArray(B.mask)?Q.each(B.mask,function(e,t){null!=t.mask?p("",t.mask.toString(),t):p("",t.toString())}):p("",B.mask.toString()),function(e){var t=/(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[]()|\\]+|./g;function i(){this.matches=[],this.isGroup=!1,this.isOptional=!1,this.isQuantifier=!1}var a,n,s=new i,r=[];for(c=[];a=t.exec(e);)switch((n=a[0]).charAt(0)){case B.optionalmarker.end:case B.groupmarker.end:var o=r.pop();0<r.length?r[r.length-1].matches.push(o):(c.push(o),s=o);break;case B.optionalmarker.start:!s.isGroup&&0<s.matches.length&&c.push(s),(s=new i).isOptional=!0,r.push(s);break;case B.groupmarker.start:!s.isGroup&&0<s.matches.length&&c.push(s),(s=new i).isGroup=!0,r.push(s);break;case B.quantifiermarker.start:var u=new i;u.isQuantifier=!0,u.matches.push(n),0<r.length?r[r.length-1].matches.push(u):s.matches.push(u);break;default:0<r.length?r[r.length-1].matches.push(n):((s.isGroup||s.isOptional)&&(s=new i),s.matches.push(n))}0<s.matches.length&&c.push(s)}(B.mask),B.greedy?u:u.sort(function(e,t){return e.mask.length-t.mask.length})}function W(e){return B.placeholder.charAt(e%B.placeholder.length)}function f(A,E){var u,l,V=!1,f=I().join("");function j(){return A[E]}function d(){return j().tests}function p(){return j()._buffer}function I(){return j().buffer}function w(l,c,f){function d(e,t,i,a){for(var n=y(e),s=i?1:0,r="",o=t.buffer,u=t.tests[n].cardinality;s<u;u--)r+=R(o,n-(u-1));return i&&(r+=i),null!=t.tests[n].fn?t.tests[n].fn.test(r,o,e,a,B):(i==R(t._buffer,e,!0)||i==B.skipOptionalPartCharacter)&&{refresh:!0,c:R(t._buffer,e,!0),pos:e}}if(f=!0===f)return!0===(h=d(l,j(),c,f))&&(h={pos:l}),h;var p=[],h=!1,v=E,k=I().slice(),m=j().lastValidPosition,g=(T(l),[]);return Q.each(A,function(e,t){if("object"==typeof t){E=e;var i,a=l,n=j().lastValidPosition;if(n==m){if(1<a-m)for(var s=-1==n?0:n;s<a&&!1!==(i=d(s,j(),k[s],!0));s++){D(I(),s,k[s],!0),!0===i&&(i={pos:s});var r=i.pos||s;j().lastValidPosition<r&&(j().lastValidPosition=r)}if(!_(a)&&!d(a,j(),c,f)){for(var o=G(a)-a,u=0;u<o&&!1===d(++a,j(),c,f);u++);g.push(E)}}if((j().lastValidPosition>=m||E==v)&&0<=a&&a<O()){if(!1!==(h=d(a,j(),c,f))){!0===h&&(h={pos:a});r=h.pos||a;j().lastValidPosition<r&&(j().lastValidPosition=r)}p.push({activeMasksetIndex:e,result:h})}}}),E=v,function(a,e){var i=!1;if(Q.each(e,function(e,t){if(i=-1==Q.inArray(t.activeMasksetIndex,a)&&!1!==t.result)return!1}),i)e=Q.map(e,function(e,t){if(-1==Q.inArray(e.activeMasksetIndex,a))return e;A[e.activeMasksetIndex].lastValidPosition=m});else{var n=-1,s=-1;Q.each(e,function(e,t){-1!=Q.inArray(t.activeMasksetIndex,a)&&!1!==t.result&(-1==n||n>t.result.pos)&&(n=t.result.pos,s=t.activeMasksetIndex)}),e=Q.map(e,function(e,t){if(-1!=Q.inArray(e.activeMasksetIndex,a)){if(e.result.pos==n)return e;if(!1!==e.result){for(var i=l;i<n;i++){if(rsltValid=d(i,A[e.activeMasksetIndex],A[s].buffer[i],!0),!1===rsltValid){A[e.activeMasksetIndex].lastValidPosition=n-1;break}D(A[e.activeMasksetIndex].buffer,i,A[s].buffer[i],!0),A[e.activeMasksetIndex].lastValidPosition=i}return rsltValid=d(n,A[e.activeMasksetIndex],c,!0),!1!==rsltValid&&(D(A[e.activeMasksetIndex].buffer,n,c,!0),A[e.activeMasksetIndex].lastValidPosition=n),e}}})}return e}(g,p)}function S(){var e=E,i={activeMasksetIndex:0,lastValidPosition:-1,next:-1};Q.each(A,function(e,t){"object"==typeof t&&(E=e,j().lastValidPosition>i.lastValidPosition?(i.activeMasksetIndex=e,i.lastValidPosition=j().lastValidPosition,i.next=G(j().lastValidPosition)):j().lastValidPosition==i.lastValidPosition&&(-1==i.next||i.next>G(j().lastValidPosition))&&(i.activeMasksetIndex=e,i.lastValidPosition=j().lastValidPosition,i.next=G(j().lastValidPosition)))}),e!=(E=-1!=i.lastValidPosition&&A[e].lastValidPosition==i.lastValidPosition?e:i.activeMasksetIndex)&&(h(I(),G(i.lastValidPosition),O()),j().writeOutBuffer=!0),u.data("_inputmask").activeMasksetIndex=E}function _(e){var t=y(e),i=d()[t];return null!=i&&i.fn}function y(e){return e%d().length}function O(){return B.getMaskLength(p(),j().greedy,j().repeat,I(),B)}function G(e){var t=O();if(t<=e)return t;for(var i=e;++i<t&&!_(i););return i}function T(e){var t=e;if(t<=0)return 0;for(;0<--t&&!_(t););return t}function D(e,t,i,a){a&&(t=r(e,t));var n=d()[y(t)],s=i;if(null!=s&&null!=n)switch(n.casing){case"upper":s=i.toUpperCase();break;case"lower":s=i.toLowerCase()}e[t]=s}function R(e,t,i){return i&&(t=r(e,t)),e[t]}function r(e,t){for(var i;null==e[t]&&e.length<O();)for(i=0;void 0!==p()[i];)e.push(p()[i++]);return t}function K(e,t,i){e._valueSet(t.join("")),null!=i&&L(e,i)}function h(e,t,i,a){for(var n=t,s=O();n<i&&n<s;n++)!0===a?_(n)||D(e,n,""):D(e,n,R(p().slice(),n,!0))}function v(e,t){var i=y(t);D(e,t,R(p(),i))}function k(s,r,o,e,u){var t=null!=e?e.slice():m(s._valueGet()).split("");Q.each(A,function(e,t){"object"==typeof t&&(t.buffer=t._buffer.slice(),t.lastValidPosition=-1,t.p=-1)}),!0!==o&&(E=0),r&&s._valueSet("");O();Q.each(t,function(e,t){if(!0===u){var i=j().p,a=-1==i?i:T(i),n=-1==a?e:G(a);-1==Q.inArray(t,p().slice(a+1,n))&&Q(s).trigger("_keypress",[!0,t.charCodeAt(0),r,o,e])}else Q(s).trigger("_keypress",[!0,t.charCodeAt(0),r,o,e])}),!0===o&&-1!=j().p&&(j().lastValidPosition=T(j().p))}function m(e){return e.replace(new RegExp("("+function(e){return Q.inputmask.escapeRegex.call(this,e)}(p().join(""))+")*$"),"")}function g(e){for(var t=I(),i=t.slice(),a=i.length-1;0<=a;a--){var n=y(a);if(!d()[n].optionality)break;if(_(a)&&w(a,t[a],!0))break;i.pop()}K(e,i)}function b(e){!V||"number"!=typeof e||B.greedy&&""==B.placeholder||(e=I().length-e);return e}function L(e,t,i){var a,n=e.jquery&&0<e.length?e[0]:e;if("number"!=typeof t)return Q(e).is(":visible")?(n.setSelectionRange?(t=n.selectionStart,i=n.selectionEnd):document.selection&&document.selection.createRange&&(i=(t=0-(a=document.selection.createRange()).duplicate().moveStart("character",-1e5))+a.text.length),{begin:t=b(t),end:i=b(i)}):{begin:0,end:0};t=b(t),i=b(i),Q(e).is(":visible")&&(i="number"==typeof i?i:t,n.scrollLeft=n.scrollWidth,0==B.insertMode&&t==i&&i++,n.setSelectionRange?(n.selectionStart=t,n.selectionEnd=s?t:i):n.createTextRange&&((a=n.createTextRange()).collapse(!0),a.moveEnd("character",i),a.moveStart("character",t),a.select()))}function N(o){if("*"!=B.repeat){var u=!1,l=0,e=E;return Q.each(A,function(e,t){if("object"==typeof t){E=e;var i=T(O());if(t.lastValidPosition>=l&&t.lastValidPosition==i){for(var a=!0,n=0;n<=i;n++){var s=_(n),r=y(n);if(s&&(null==o[n]||o[n]==W(n))||!s&&o[n]!=p()[r]){a=!1;break}}if(u=u||a)return!1}l=t.lastValidPosition}}),E=e,u}}return this.unmaskedvalue=function(e,t){return V=e.data("_inputmask").isRTL,function(e,t){{if(!d()||!0!==t&&e.hasClass("hasDatepicker"))return e[0]._valueGet();var i=Q.map(I(),function(e,t){return _(t)&&w(t,e,!0)?e:null});return(V?i.reverse():i).join("")}}(e,t)},this.isComplete=function(e){return N(e)},this.mask=function(e){if((u=Q(e)).is(":input")){if(u.data("_inputmask",{masksets:A,activeMasksetIndex:E,opts:B,isRTL:!1}),B.showTooltip&&u.prop("title",j().mask),j().greedy=j().greedy?j().greedy:0==j().repeat,null!=u.attr("maxLength")){var i=u.prop("maxLength");-1<i&&Q.each(A,function(e,t){"object"==typeof t&&"*"==t.repeat&&(t.repeat=i)}),O()>=i&&-1<i&&(i<p().length&&(p().length=i),0==j().greedy&&(j().repeat=Math.round(i/p().length)),u.prop("maxLength",2*O()))}!function(e){var t;Object.getOwnPropertyDescriptor&&(t=Object.getOwnPropertyDescriptor(e,"value"));if(t&&t.get){if(!e._valueGet){var r=t.get,n=t.set;e._valueGet=function(){return V?r.call(this).split("").reverse().join(""):r.call(this)},e._valueSet=function(e){n.call(this,V?e.split("").reverse().join(""):e)},Object.defineProperty(e,"value",{get:function(){var e=Q(this),t=Q(this).data("_inputmask"),i=t.masksets,a=t.activeMasksetIndex;return t&&t.opts.autoUnmask?e.inputmask("unmaskedvalue"):r.call(this)!=i[a]._buffer.join("")?r.call(this):""},set:function(e){n.call(this,e),Q(this).triggerHandler("setvalue.inputmask")}})}}else if(document.__lookupGetter__&&e.__lookupGetter__("value")){if(!e._valueGet){var r=e.__lookupGetter__("value"),n=e.__lookupSetter__("value");e._valueGet=function(){return V?r.call(this).split("").reverse().join(""):r.call(this)},e._valueSet=function(e){n.call(this,V?e.split("").reverse().join(""):e)},e.__defineGetter__("value",function(){var e=Q(this),t=Q(this).data("_inputmask"),i=t.masksets,a=t.activeMasksetIndex;return t&&t.opts.autoUnmask?e.inputmask("unmaskedvalue"):r.call(this)!=i[a]._buffer.join("")?r.call(this):""}),e.__defineSetter__("value",function(e){n.call(this,e),Q(this).triggerHandler("setvalue.inputmask")})}}else if(e._valueGet||(e._valueGet=function(){return V?this.value.split("").reverse().join(""):this.value},e._valueSet=function(e){this.value=V?e.split("").reverse().join(""):e}),null==Q.valHooks.text||1!=Q.valHooks.text.inputmaskpatch){var r=Q.valHooks.text&&Q.valHooks.text.get?Q.valHooks.text.get:function(e){return e.value},n=Q.valHooks.text&&Q.valHooks.text.set?Q.valHooks.text.set:function(e,t){return e.value=t,e};jQuery.extend(Q.valHooks,{text:{get:function(e){var t=Q(e);if(t.data("_inputmask")){if(t.data("_inputmask").opts.autoUnmask)return t.inputmask("unmaskedvalue");var i=r(e),a=t.data("_inputmask"),n=a.masksets,s=a.activeMasksetIndex;return i!=n[s]._buffer.join("")?i:""}return r(e)},set:function(e,t){var i=Q(e),a=n(e,t);return i.data("_inputmask")&&i.triggerHandler("setvalue.inputmask"),a},inputmaskpatch:!0}})}}(e);var t,a,n,P=!1,x=!1;if(B.numericInput&&(B.isNumeric=B.numericInput),("rtl"==e.dir||B.numericInput&&B.rightAlignNumerics||B.isNumeric&&B.rightAlignNumerics)&&u.css("text-align","right"),"rtl"==e.dir||B.numericInput){e.dir="ltr",u.removeAttr("dir");var s=u.data("_inputmask");s.isRTL=!0,u.data("_inputmask",s),V=!0}u.unbind(".inputmask"),u.removeClass("focus.inputmask"),u.closest("form").bind("submit",function(){f!=I().join("")&&u.change()}).bind("reset",function(){setTimeout(function(){u.trigger("setvalue")},0)}),u.bind("mouseenter.inputmask",function(){!Q(this).hasClass("focus.inputmask")&&B.showMaskOnHover&&this._valueGet()!=I().join("")&&K(this,I())}).bind("blur.inputmask",function(){var e=Q(this),t=this,i=t._valueGet(),a=I();e.removeClass("focus.inputmask"),f!=I().join("")&&e.change(),B.clearMaskOnLostFocus&&""!=i&&(i==p().join("")?t._valueSet(""):g(t)),!1===N(a)&&(e.trigger("incomplete"),B.clearIncomplete&&(Q.each(A,function(e,t){"object"==typeof t&&(t.buffer=t._buffer.slice(),t.lastValidPosition=-1)}),E=0,B.clearMaskOnLostFocus?t._valueSet(""):K(t,a=p().slice())))}).bind("focus.inputmask",function(){var e=Q(this),t=this._valueGet();B.showMaskOnFocus&&!e.hasClass("focus.inputmask")&&(!B.showMaskOnHover||B.showMaskOnHover&&""==t)&&this._valueGet()!=I().join("")&&K(this,I(),G(j().lastValidPosition)),e.addClass("focus.inputmask"),f=I().join("")}).bind("mouseleave.inputmask",function(){var e=Q(this),t=this;B.clearMaskOnLostFocus&&(e.hasClass("focus.inputmask")||t._valueGet()==e.attr("placeholder")||(t._valueGet()==p().join("")||""==t._valueGet()?t._valueSet(""):g(t)))}).bind("click.inputmask",function(){var s=this;setTimeout(function(){var e=L(s),t=I();if(e.begin==e.end){var i,a=B.isRTL?b(e.begin):e.begin,n=j().lastValidPosition;a<(i=B.isNumeric&&!1===B.skipRadixDance&&""!=B.radixPoint&&-1!=Q.inArray(B.radixPoint,t)?B.numericInput?G(Q.inArray(B.radixPoint,t)):Q.inArray(B.radixPoint,t):G(n))?_(a)?L(s,a):L(s,G(a)):L(s,i)}},0)}).bind("dblclick.inputmask",function(){var e=this;setTimeout(function(){L(e,0,G(j().lastValidPosition))},0)}).bind(F+".inputmask dragdrop.inputmask drop.inputmask",function(e){var t=this,i=Q(t);if("propertychange"==e.type&&t._valueGet().length<=O())return!0;setTimeout(function(){k(t,!0,!1,void 0,!0),!0===N(I())&&i.trigger("complete"),i.click()},0)}).bind("setvalue.inputmask",function(){k(this,!0),f=I().join(""),this._valueGet()==p().join("")&&this._valueSet("")}).bind("_keypress.inputmask",o).bind("complete.inputmask",B.oncomplete).bind("incomplete.inputmask",B.onincomplete).bind("cleared.inputmask",B.oncleared).bind("keyup.inputmask",function(e){var t=Q(this),i=this,a=e.keyCode,n=I();U&&a==B.keyCode.BACKSPACE&&l==i._valueGet()&&r.call(this,e);B.onKeyUp.call(this,e,n,B),a==B.keyCode.TAB&&B.showMaskOnFocus&&(t.hasClass("focus.inputmask")&&0==i._valueGet().length?(n=p().slice(),K(i,n),L(i,0),f=I().join("")):(K(i,n),L(i,0,O())))}),U?u.bind("input.inputmask",function(e){var t=Q(this);l=I().join(""),k(this,!1,!1),K(this,I()),!0===N(I())&&t.trigger("complete"),t.click()}):u.bind("keydown.inputmask",r).bind("keypress.inputmask",o),k(e,!0,!1),f=I().join("");try{t=document.activeElement}catch(e){}t===e?(u.addClass("focus.inputmask"),L(e,G(j().lastValidPosition))):B.clearMaskOnLostFocus?I().join("")==p().join("")?e._valueSet(""):g(e):K(e,I()),a=e,n=Q._data(a).events,Q.each(n,function(e,t){Q.each(t,function(e,t){if("inputmask"==t.namespace&&"setvalue"!=t.type&&"_keypress"!=t.type){var i=t.handler;t.handler=function(e){if(!this.readOnly&&!this.disabled)return i.apply(this,arguments);e.preventDefault}}})})}function c(e,t,i,a){var n=I();if(!1!==a)for(;!_(e)&&0<=e-1;)e--;for(var s=e;s<t&&s<O();s++)if(_(s)){v(n,s);var r=G(s),o=R(n,r);if(o!=W(r))if(r<O()&&!1!==w(s,o,!0)&&d()[y(s)].def==d()[y(r)].def)D(n,s,R(n,r),!0),r<t&&v(n,r);else if(_(s))break}else v(n,s);if(null!=i&&D(n,T(t),i),0==j().greedy){var u=m(n.join("")).split("");n.length=u.length;s=0;for(var l=n.length;s<l;s++)n[s]=u[s];0==n.length&&(j().buffer=p().slice())}return e}function C(e,t,i,a){for(var n=I(),s=e;s<=t&&s<O();s++)if(_(s)){var r=R(n,s,!0);if(D(n,s,i,!0),r!=W(s)){var o=G(s);if(!(o<O()))break;if(!1!==w(o,r,!0)&&d()[y(s)].def==d()[y(o)].def)i=r;else{if(_(o))break;i=r}}else if(i=r,!0!==a)break}else v(n,s);var u=n.length;if(0==j().greedy){var l=m(n.join("")).split("");n.length=l.length;s=0;for(var c=n.length;s<c;s++)n[s]=l[s];0==n.length&&(j().buffer=p().slice())}return t-(u-n.length)}function M(e,t,i){if(B.numericInput||V){switch(t){case B.keyCode.BACKSPACE:t=B.keyCode.DELETE;break;case B.keyCode.DELETE:t=B.keyCode.BACKSPACE}if(V){var a=i.end;i.end=i.begin,i.begin=a}}var n=!0;if(i.begin==i.end){var s=t==B.keyCode.BACKSPACE?i.begin-1:i.begin;B.isNumeric&&""!=B.radixPoint&&I()[s]==B.radixPoint&&(i.begin=I().length-1==s?i.begin:t==B.keyCode.BACKSPACE?s:G(s),i.end=i.begin),n=!1,t==B.keyCode.BACKSPACE?i.begin--:t==B.keyCode.DELETE&&i.end++}else i.end-i.begin!=1||B.insertMode||(n=!1,t==B.keyCode.BACKSPACE&&i.begin--);h(I(),i.begin,i.end);var r=O();if(0==B.greedy)c(i.begin,r,void 0,!V&&t==B.keyCode.BACKSPACE&&!n);else{for(var o=i.begin,u=i.begin;u<i.end;u++)!_(u)&&n||(o=c(i.begin,r,void 0,!V&&t==B.keyCode.BACKSPACE&&!n));n||(i.begin=o)}var l=G(-1);h(I(),i.begin,i.end,!0),k(e,!1,null==A[1]||l>=i.end,I()),j().lastValidPosition<l?(j().lastValidPosition=-1,j().p=l):j().p=i.begin}function r(t){P=!1;var i=this,e=Q(i),a=t.keyCode,n=L(i);a==B.keyCode.BACKSPACE||a==B.keyCode.DELETE||H&&127==a||t.ctrlKey&&88==a?(t.preventDefault(),88==a&&(f=I().join("")),M(i,a,n),S(),K(i,I(),j().p),i._valueGet()==p().join("")&&e.trigger("cleared"),B.showTooltip&&e.prop("title",j().mask)):a==B.keyCode.END||a==B.keyCode.PAGE_DOWN?setTimeout(function(){var e=G(j().lastValidPosition);B.insertMode||e!=O()||t.shiftKey||e--,L(i,t.shiftKey?n.begin:e,e)},0):a==B.keyCode.HOME&&!t.shiftKey||a==B.keyCode.PAGE_UP?L(i,0,t.shiftKey?n.begin:0):a==B.keyCode.ESCAPE||90==a&&t.ctrlKey?(k(i,!0,!1,f.split("")),e.click()):a!=B.keyCode.INSERT||t.shiftKey||t.ctrlKey?0!=B.insertMode||t.shiftKey||(a==B.keyCode.RIGHT?setTimeout(function(){var e=L(i);L(i,e.begin)},0):a==B.keyCode.LEFT&&setTimeout(function(){var e=L(i);L(i,e.begin-1)},0)):(B.insertMode=!B.insertMode,L(i,B.insertMode||n.begin!=O()?n.begin:n.begin-1));var s=L(i);!0===B.onKeyDown.call(this,t,I(),B)&&L(i,s.begin,s.end),x=-1!=Q.inArray(a,B.ignorables)}function o(e,t,i,a,c,n){if(null==i&&P)return!1;P=!0;var s=Q(this);e=e||window.event;var r,o;i=i||e.which||e.charCode||e.keyCode;if(!(e.ctrlKey&&e.altKey||!(e.ctrlKey||e.metaKey||x)||!0===t))return!0;if(i){!0!==t&&46==i&&0==e.shiftKey&&","==B.radixPoint&&(i=44);var u,l,f,d=String.fromCharCode(i);if(t){var p=c?n:j().lastValidPosition+1;u={begin:p,end:p}}else u=L(this);var h=(r=u.begin,o=u.end,V?1<r-o||r-o==1&&B.insertMode:1<o-r||o-r==1&&B.insertMode),v=E;h&&(E=v,Q.each(A,function(e,t){"object"==typeof t&&(E=e,j().undoBuffer=I().join(""))}),M(this,B.keyCode.DELETE,u),B.insertMode||Q.each(A,function(e,t){"object"==typeof t&&(E=e,C(u.begin,O(),W(u.begin),!0),j().lastValidPosition=G(j().lastValidPosition))}),E=v);var k=I().join("").indexOf(B.radixPoint);B.isNumeric&&!0!==t&&-1!=k&&(B.greedy&&u.begin<=k?(u.begin=T(u.begin),u.end=u.begin):d==B.radixPoint&&(u.begin=k,u.end=u.begin));var m=u.begin;l=w(m,d,c),!0===c&&(l=[{activeMasksetIndex:E,result:l}]);var g=-1;if(Q.each(l,function(e,t){E=t.activeMasksetIndex,j().writeOutBuffer=!0;var i=t.result;if(!1!==i){var a=!1,n=I();if(!0!==i&&(a=i.refresh,m=null!=i.pos?i.pos:m,d=null!=i.c?i.c:d),!0!==a){if(1==B.insertMode){for(var s=O(),r=n.slice();R(r,s,!0)!=W(s)&&m<=s;)s=0==s?-1:T(s);if(m<=s){C(m,n.length,d);var o=j().lastValidPosition,u=G(o);u!=O()&&m<=o&&R(I(),u,!0)!=W(u)&&(j().lastValidPosition=u)}else j().writeOutBuffer=!1}else D(n,m,d,!0);(-1==g||g>G(m))&&(g=G(m))}else if(!c){var l=m<O()?m+1:m;(-1==g||l<g)&&(g=l)}g>j().p&&(j().p=g)}}),!0!==c&&(E=v,S()),!1!==a&&(Q.each(l,function(e,t){if(t.activeMasksetIndex==E)return f=t,!1}),null!=f)){var _=this;if(setTimeout(function(){B.onKeyValidation.call(_,f.result,B)},0),j().writeOutBuffer&&!1!==f.result){var y,b=I();y=t?void 0:B.numericInput?k<m?T(g):d==B.radixPoint?g-1:T(g-1):g,K(this,b,y),!0!==t&&setTimeout(function(){!0===N(b)&&s.trigger("complete")},0)}else h&&(j().buffer=j().undoBuffer.split(""))}B.showTooltip&&s.prop("title",j().mask),e.preventDefault()}}},this}return this})}(jQuery);